common:
  tags: infuse net
  min_flash: 64
  min_ram: 32
tests:
  net.auto_sntp:
    build_only: true
    platform_allow:
      - nrf7002dk/nrf5340/cpuapp
    depends_on:
      - net
  net.auto_sntp.native:
    platform_allow:
      - native_sim
    integration_platforms:
      - native_sim
    extra_configs:
      - CONFIG_NATIVE_SIM_SLOWDOWN_TO_REAL_TIME=y
    extra_args:
      - OVERLAY_CONFIG="overlay-nsos.conf"
    harness: console
    harness_config:
      type: multi_line
      ordered: true
      regex:
        - "pool.ntp.org -> (.*)"
        - "Sending request..."
        - "Unix time: (.*)"
        - "Now: (.*) UTC"
        - "pool.ntp.org -> (.*)"
        - "Sending request..."
        - "Unix time: (.*)"
        - "Now: (.*) UTC"
        - "pool.ntp.org -> (.*)"
        - "Sending request..."
        - "Unix time: (.*)"
        - "Now: (.*) UTC"
        - "pool.ntp.org -> (.*)"
        - "Sending request..."
        - "Unix time: (.*)"
        - "Now: (.*) UTC"
