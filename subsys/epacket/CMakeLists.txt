# ePacket compilation

zephyr_library_named(epacket)

zephyr_library_sources(epacket.c handlers.c)
zephyr_library_sources_ifdef(CONFIG_EPACKET_CRYPTO
  keys.c
  interfaces/epacket_common_crypt.c
)

zephyr_library_sources_ifdef(CONFIG_EPACKET_INTERFACE_UDP interfaces/epacket_udp.c)
zephyr_library_sources_ifdef(CONFIG_EPACKET_INTERFACE_UDP interfaces/epacket_udp_crypt.c)
zephyr_library_sources_ifdef(CONFIG_EPACKET_INTERFACE_SERIAL interfaces/epacket_serial.c)
zephyr_library_sources_ifdef(CONFIG_EPACKET_INTERFACE_SERIAL interfaces/epacket_serial_crypt.c)
zephyr_library_sources_ifdef(CONFIG_EPACKET_INTERFACE_DUMMY interfaces/epacket_dummy.c)

if(CONFIG_EPACKET_INTERFACE_ZTEST_PACKETS)
  zephyr_library_sources(interfaces/epacket_bt_adv_crypt.c)
  zephyr_library_sources(interfaces/epacket_udp_crypt.c)
  zephyr_library_sources(interfaces/epacket_serial_crypt.c)
endif()

zephyr_library_link_libraries_ifdef(CONFIG_MBEDTLS mbedTLS)
