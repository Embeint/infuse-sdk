# Infuse-IoT WiFi Connection Manager

config CONN_MGR_WIFI_KV_STORE
	bool "WiFi connection manager based on KV store"
	depends on KV_STORE
	depends on KV_STORE_KEY_WIFI_SSID
	depends on KV_STORE_KEY_WIFI_PSK

if CONN_MGR_WIFI_KV_STORE

config CONN_MGR_WIFI_KV_STORE_AUTO_CONNECT
	bool "WiFi connection should be created at boot"
	default y

config CONN_MGR_WIFI_KV_STORE_PERSISTENT
	bool "WiFi connection should be persistent"
	default y

config CONN_MGR_WIFI_KV_STORE_CONNECT_CALLER_CONTEXT
	bool "Run the initiating `NET_REQUEST_WIFI_CONNECT` call in the context of the caller"
	default y if WIFI_NM_WPA_SUPPLICANT
	help
	  Run the `NET_REQUEST_WIFI_CONNECT` call resulting from `conn_mgr_if_connect` in the
	  context of the caller of `conn_mgr_if_connect`, instead of deferring it to the system
	  workqueue. For some WiFi backends (WPA Supplicant) this call can block for excessive
	  durations due to crypto operations (>700ms on nRF54L15), which is suboptimal on the
	  system workqueue. Enabling this option requires that the original caller can afford to
	  block while the system workqueue can't.

config CONN_MGR_WIFI_KV_STORE_CACHE_LAST_FREQUENCY
	bool "Use the WiFi band and channel from the previous connection"
	help
	  When initiating a connection, explicitly specify the band and channel of
	  the previous connection that succeeded, if available. Cached information
	  is reset when the configuration changes or a connection fails. For WiFi
	  modems that limit scanning to the provided frequencies, this can dramatically
	  speed up subsequent connections at the cost of failing to connect on the first
	  time if the WiFi channel changes (Multi-AP scenario).

module = CONN_MGR_WIFI_KV_STORE
module-str = conn_mgr_wifi
source "subsys/logging/Kconfig.template.log_config"

endif
