/**
 * @file
 * @copyright 2024 Embeint Holdings Pty Ltd
 * @author Jordan Yates <jordan@embeint.com>
 */

#ifndef INFUSE_SDK_DRIVERS_FUEL_GAUGE_MAX17260_H_
#define INFUSE_SDK_DRIVERS_FUEL_GAUGE_MAX17260_H_

#ifdef __cplusplus
extern "C" {
#endif

enum max17260_reg {
	MAX17260_REG_STATUS = 0x00,
	MAX17260_REG_VOLTAGE_ALERT_THRESHOLD = 0x01,
	MAX17260_REG_TEMPERATURE_ALERT_THRESHOLD = 0x02,
	MAX17260_REG_SOC_ALERT_THRESHOLD = 0x03,
	MAX17260_REG_AT_RATE = 0x04,
	MAX17260_REG_REP_CAP = 0x05,
	MAX17260_REG_REP_SOC = 0x06,
	MAX17260_REG_AGE = 0x07,
	MAX17260_REG_TEMPERATURE = 0x08,
	MAX17260_REG_VOLTAGE_CELL = 0x09,
	MAX17260_REG_CURRENT = 0x0A,
	MAX17260_REG_AVG_CURRENT = 0x0B,
	MAX17260_REG_Q_RESIDUAL = 0x0C,
	MAX17260_REG_MIX_SOC = 0x0D,
	MAX17260_REG_AV_SOC = 0x0E,
	MAX17260_REG_MIX_CAP = 0x0F,
	MAX17260_REG_FULL_CAP_REP = 0x10,
	MAX17260_REG_TIME_TO_EMPTY = 0x11,
	MAX17260_REG_QR_TABLE_00 = 0x12,
	MAX17260_REG_FULL_SOC_THRESHOLD = 0x13,
	MAX17260_REG_R_CELL = 0x14,
	MAX17260_REG_CYCLES = 0x17,
	MAX17260_REG_DESIGN_CAPACITY = 0x18,
	MAX17260_REG_AVG_VOLTAGE_CELL = 0x19,
	MAX17260_REG_MAX_MIN_TEMPERATURE = 0x1A,
	MAX17260_REG_MAX_MIN_VOLTAGE = 0x1B,
	MAX17260_REG_MAX_MIN_CURRENT = 0x1C,
	MAX17260_REG_CONFIG = 0x1D,
	MAX17260_REG_I_CHARGE_TERM = 0x1E,
	MAX17260_REG_AV_CAP = 0x1F,
	MAX17260_REG_TIME_TO_FULL = 0x20,
	MAX17260_REG_DEV_NAME = 0x21,
	MAX17260_REG_QR_TABLE_10 = 0x22,
	MAX17260_REG_FULL_CAPACITY_NOMINAL = 0x23,
	MAX17260_REG_AIN = 0x27,
	MAX17260_REG_LEARN_CFG = 0x28,
	MAX17260_REG_FILTER_CFG = 0x29,
	MAX17260_REG_RELAX_CFG = 0x2A,
	MAX17260_REG_MISC_CFG = 0x2B,
	MAX17260_REG_T_GAIN = 0x2C,
	MAX17260_REG_T_OFF = 0x2D,
	MAX17260_REG_C_GAIN = 0x2E,
	MAX17260_REG_C_OFF = 0x2F,
	MAX17260_REG_QR_TABLE_20 = 0x32,
	MAX17260_REG_DIE_TEMPERATURE = 0x34,
	MAX17260_REG_FULL_CAPACITY = 0x35,
	MAX17260_REG_R_COMP_0 = 0x38,
	MAX17260_REG_TEMP_CO = 0x39,
	MAX17260_REG_VOLTAGE_EMPTY = 0x3A,
	MAX17260_REG_F_STAT = 0x3D,
	MAX17260_REG_TIMER = 0x3E,
	MAX17260_REG_SHUTDOWN_TIMER = 0x3F,
	MAX17260_REG_CMD = 0x60,
	MAX17260_REG_STATUS2 = 0xB0,
	MAX17260_REG_HIB_CFG = 0xBA,
	MAX17260_REG_R_SENSE = 0xD0,
};

/* MAX17260_REG_STATUS values */
enum max17260_reg_status {
	MAX17260_STATUS_POR = BIT(1),
	MAX17260_STATUS_CURRENT_MIN_ALERT = BIT(2),
	MAX17260_STATUS_BATTERY_ABSENT = BIT(3),
	MAX17260_STATUS_CURRENT_MAX_ALERT = BIT(6),
	MAX17260_STATUS_SOC_CHANGE = BIT(7),
	MAX17260_STATUS_VOLTAGE_MIN_ALERT = BIT(8),
	MAX17260_STATUS_TEMPERATURE_MIN_ALERT = BIT(9),
	MAX17260_STATUS_SOC_MIN_ALERT = BIT(10),
	MAX17260_STATUS_BATTERY_INSERTED = BIT(11),
	MAX17260_STATUS_VOLTAGE_MAX_ALERT = BIT(12),
	MAX17260_STATUS_TEMPERATURE_MAX_ALERT = BIT(13),
	MAX17260_STATUS_SOC_MAX_ALERT = BIT(14),
	MAX17260_STATUS_BATTERY_REMOVAL = BIT(15),
};

/* MAX17260_REG_CND values */
enum max17260_reg_cmd {
	MAX17260_CMD_CLEAR = 0x0000,
	MAX17260_CMD_SOFT_WAKEUP = 0x0090,
};

/* MAX17260_REG_F_STAT values */
enum max17260_reg_f_stat {
	MAX17260_F_STAT_DATA_NOT_READY = BIT(0),
	MAX17260_F_STAT_LONG_RELAXATION = BIT(6),
	MAX17260_F_STAT_FULL_QUALIFIED = BIT(7),
	MAX17260_F_STAT_EMPTY = BIT(8),
	MAX17260_F_STAT_RELAXED = BIT(9),
};

/* MAX17260_REG_CONFIG */
enum max17260_reg_config {
	MAX17260_CONFIG_BER_ENABLE = BIT(0),
	MAX17260_CONFIG_BEI_ENABLE = BIT(1),
	MAX17260_CONFIG_AEN_ENABLE = BIT(2),
	MAX17260_CONFIG_FORCE_THERMISTOR_BIAS = BIT(3),
	MAX17260_CONFIG_ENABLE_THERMISTOR = BIT(4),
	MAX17260_CONFIG_COMMS_SHUTDOWN = BIT(6),
	MAX17260_CONFIG_SHUTDOWN = BIT(7),
	MAX17260_CONFIG_TEMPERATURE_EXTERNAL = BIT(8),
	MAX17260_CONFIG_TEMPERATURE_EABLE = BIT(9),
	MAX17260_CONFIG_TH_SHUTDOWN = BIT(10),
	MAX17260_CONFIG_TH_CURRENT_ALERT_STICKY = BIT(11),
	MAX17260_CONFIG_TH_VOLTAGE_ALERT_STICKY = BIT(12),
	MAX17260_CONFIG_TH_TEMPERATURE_ALERT_STICKY = BIT(13),
	MAX17260_CONFIG_TH_SOC_ALERT_STICKY = BIT(14),
};

/* MAX17260_REG_HIB_CFG values */
enum max17260_reg_hib_cfg {
	MAX17260_HIB_CFG_HIB_SCALAR = BIT_MASK(3),
	MAX17260_HIB_CFG_HIB_EXIT_TIME = BIT_MASK(2) << 3,
	MAX17260_HIB_CFG_HIB_THRESHOLD = BIT_MASK(4) << 8,
	MAX17260_HIB_CFG_HIB_ENTER_TIME = BIT_MASK(2) << 12,
	MAX17260_HIB_CFG_EN_HIB = BIT(15),
};

#ifdef __cplusplus
}
#endif

#endif /* INFUSE_SDK_DRIVERS_FUEL_GAUGE_MAX17260_H_ */
