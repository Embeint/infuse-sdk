/**
 * @file
 * @brief Autogenerated KV store definitions
 * @copyright 2024 Embeint Inc
 * @author scripts/west_commands/cloudgen.py
 *
 * SPDX-License-Identifier: LicenseRef-Embeint
 */

#include <zephyr/toolchain.h>

#include <infuse/fs/kv_types.h>

#include "kv_internal.h"

static struct key_value_slot_definition kv_slots[] = {
{% for base_id, info in definitions.items() %}
#ifdef CONFIG_KV_STORE_KEY_{{ info['name'] }}
	{
		.key = KV_KEY_{{ info['name'] }},
		.range = {{ info['range_val'] }},
		.flags = {{ info['flags'] }},
	},
#endif /* CONFIG_KV_STORE_KEY_{{ info['name'] }} */
{% endfor %}
#ifdef CONFIG_KV_STORE_USER_KEYS
#define KV_STORE_USER_KEYS_ARRAY_DEFINE
#include "infuse_kv_user_keys.c"
#undef KV_STORE_USER_KEYS_ARRAY_DEFINE
#endif
};

/* Detect changes in struct size as this array exists in every application */
BUILD_ASSERT(sizeof(struct key_value_slot_definition) == 4);

struct key_value_slot_definition *kv_internal_slot_definitions(size_t *num)
{
	*num = ARRAY_SIZE(kv_slots);
	return kv_slots;
}
